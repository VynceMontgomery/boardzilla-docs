"use strict";(self.webpackChunkboardzilla_docs=self.webpackChunkboardzilla_docs||[]).push([[4266],{9061:(t,e,_)=>{_.r(e),_.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>n,metadata:()=>o,toc:()=>c});var i=_(5893),s=_(1151),r=_(3196);const n={sidebar_position:8},a="Layout sandbox",o={id:"game/layout-sandbox",title:"Layout sandbox",description:"The best way to explain Boardzilla's layout engine is to experiement. This",source:"@site/docs/game/layout-sandbox.mdx",sourceDirName:"game",slug:"/game/layout-sandbox",permalink:"/game/layout-sandbox",draft:!1,unlisted:!1,editUrl:"https://github.com/boardzilla/boardzilla-docs/tree/main/docs/game/layout-sandbox.mdx",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"UI",permalink:"/game/ui"},next:{title:"Interface",permalink:"/category/interface"}},l={},c=[];function h(t){const e={a:"a",code:"code",h1:"h1",p:"p",...(0,s.a)(),...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"layout-sandbox",children:"Layout sandbox"}),"\n",(0,i.jsxs)(e.p,{children:["The best way to explain Boardzilla's layout engine is to experiement. This\nsandbox lets you adjust the parameters and add/remove items into a layout for an\nimaginary ",(0,i.jsx)(e.code,{children:"space"})," with a square aspect ratio. See the results, and copy the\nresultant code to use the layout in your game. Of course, always refer to the\n",(0,i.jsx)(e.a,{href:"../api/modules#layoutattributes",children:"documentation"})," to understand everything that's\ngoing on, as well as a few more options that are not pictured here."]}),"\n",(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.code,{children:"area"})," is treated here as the entire square box. In reality you may set\n",(0,i.jsx)(e.code,{children:"area"})," or ",(0,i.jsx)(e.code,{children:"margin"})," to restrict the layout to a portion of the given space."]}),"\n","\n","\n",(0,i.jsx)(r.Z,{})]})}function u(t={}){const{wrapper:e}={...(0,s.a)(),...t.components};return e?(0,i.jsx)(e,{...t,children:(0,i.jsx)(h,{...t})}):h(t)}},3196:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7294),_boardzilla_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5048),_boardzilla_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3927),_layout_module_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(841),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5893);const Layout=()=>{const[pieces,setPieces]=react__WEBPACK_IMPORTED_MODULE_0__.useState(4),[orthogonal,setOrthogonal]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!0),[gapX,setGapX]=react__WEBPACK_IMPORTED_MODULE_0__.useState(10),[gapY,setGapY]=react__WEBPACK_IMPORTED_MODULE_0__.useState(0),[offsetRowX,setOffsetRowX]=react__WEBPACK_IMPORTED_MODULE_0__.useState(0),[offsetRowY,setOffsetRowY]=react__WEBPACK_IMPORTED_MODULE_0__.useState(100),[offsetColumnX,setOffsetColumnX]=react__WEBPACK_IMPORTED_MODULE_0__.useState(100),[offsetColumnY,setOffsetColumnY]=react__WEBPACK_IMPORTED_MODULE_0__.useState(0),[aspectRatio,setAspectRatio]=react__WEBPACK_IMPORTED_MODULE_0__.useState(7),[scaling,setScaling]=react__WEBPACK_IMPORTED_MODULE_0__.useState("fit"),[alignment,setAlignment]=react__WEBPACK_IMPORTED_MODULE_0__.useState("center"),[direction,setDirection]=react__WEBPACK_IMPORTED_MODULE_0__.useState("square"),[minRows,setMinRows]=react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0),[maxRows,setMaxRows]=react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0),[minColumns,setMinColumns]=react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0),[maxColumns,setMaxColumns]=react__WEBPACK_IMPORTED_MODULE_0__.useState(void 0),[maxOverlap,setMaxOverlap]=react__WEBPACK_IMPORTED_MODULE_0__.useState(100),[haphazardly,setHaphazardly]=react__WEBPACK_IMPORTED_MODULE_0__.useState(0),board=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>{const{Space:t,Piece:e,GameElement:_}=(0,_boardzilla_core__WEBPACK_IMPORTED_MODULE_3__._Z)();return new _boardzilla_core__WEBPACK_IMPORTED_MODULE_4__.Z({classRegistry:[t,e,_]})}),[_boardzilla_core__WEBPACK_IMPORTED_MODULE_4__.Z]),aspectRatioStr=["1 / 4","1 / 3","1 / 2","3 / 5","2 / 3","3 / 4","4 / 5","1","5 / 4","4 / 3","3 / 2","5 / 3","2 / 1","3 / 1","4 / 1"];return react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>{const{Piece:Piece}=(0,_boardzilla_core__WEBPACK_IMPORTED_MODULE_3__._Z)();board.resetUI(),Piece.aspectRatio=aspectRatio,board.layout(Piece,Object.assign({margin:0,scaling:scaling,alignment:alignment,direction:direction,haphazardly:haphazardly||void 0,maxOverlap:maxOverlap,rows:{min:minRows,max:maxRows},columns:{min:minColumns,max:maxColumns}},orthogonal?{gap:{x:gapX,y:gapY}}:{offsetRow:{x:offsetRowX,y:offsetRowY},offsetColumn:{x:offsetColumnX,y:offsetColumnY}})),console.log(Object.assign({margin:0,scaling:scaling,alignment:alignment,direction:direction,haphazardly:haphazardly||void 0,maxOverlap:maxOverlap,rows:{min:minRows,max:maxRows},columns:{min:minColumns,max:maxColumns}},orthogonal?{gap:{x:gapX,y:gapY}}:{offsetRow:{x:offsetRowX,y:offsetRowY},offsetColumn:{x:offsetColumnX,y:offsetColumnY}})),pieces>board._t.children.length&&board.createMany(pieces-board._t.children.length,Piece,"a"),pieces<board._t.children.length&&board.lastN(board._t.children.length-pieces,Piece).remove(),board.all(Piece).appearance({aspectRatio:eval(aspectRatioStr[aspectRatio])}),board.applyLayouts()}),[board,orthogonal,gapX,gapY,offsetColumnX,offsetColumnY,offsetRowX,offsetRowY,pieces,aspectRatio,scaling,alignment,direction,minRows,maxRows,minColumns,maxColumns,maxOverlap,haphazardly]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z["layout-playground"],children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z["parameter-controls"],children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.label,children:"# of pieces"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.value,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"number",min:1,value:pieces,onChange:t=>setPieces(parseInt(Math.max(1,t.target.value)))})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.label,children:["rows",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.helper,children:"leave blank for no limit"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.value,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{children:["min: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"number",min:1,value:minRows??"",onChange:t=>setMinRows(t.target.value.length?parseInt(t.target.value):void 0)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("br",{}),"max: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"number",min:1,value:maxRows??"",onChange:t=>setMaxRows(t.target.value.length?parseInt(t.target.value):void 0)})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.label,children:["columns",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.helper,children:"leave blank for no limit"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.value,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{children:["min: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"number",min:1,value:minColumns??"",onChange:t=>setMinColumns(t.target.value.length?parseInt(t.target.value):void 0)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("br",{}),"max: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"number",min:1,value:maxColumns??"",onChange:t=>setMaxColumns(t.target.value.length?parseInt(t.target.value):void 0)})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.label,children:"spacing"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.value,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"button",className:orthogonal?_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.selected:"",onClick:()=>setOrthogonal(!0),value:"gap"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"button",className:orthogonal?"":_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.selected,onClick:()=>setOrthogonal(!1),value:"offsets"})]}),orthogonal?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.label,children:["gap",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.helper,children:"gap size is absolute to board size"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.value,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.xyrange,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{children:["X: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("nobr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"range",min:0,max:50,step:.5,value:gapX,onChange:t=>setGapX(parseFloat(t.target.value))})," ",gapX,"%"]})]}),"Y: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{orient:"vertical",className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.vertical,type:"range",min:0,max:50,step:.5,value:gapY,onChange:t=>setGapY(parseFloat(t.target.value))})," ",gapY,"%"]})})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.label,children:["offsets",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.helper,children:"offsets are absolute and needed for hex grids"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.value,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.xyrange,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{children:["row.x: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("nobr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"range",min:-100,max:100,value:offsetRowX,onChange:t=>setOffsetRowX(parseInt(t.target.value))})," ",offsetRowX,"%"]})]}),"row.y: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"range",orient:"vertical",className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.vertical,min:0,max:200,value:offsetRowY,onChange:t=>setOffsetRowY(parseInt(t.target.value))})," ",offsetRowY,"%"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.xyrange,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{children:["column.x: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("nobr",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"range",min:0,max:200,value:offsetColumnX,onChange:t=>setOffsetColumnX(parseInt(t.target.value))})," ",offsetColumnX,"%"]})]}),"column.y: ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"range",orient:"vertical",className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.vertical,min:-100,max:100,value:offsetColumnY,onChange:t=>setOffsetColumnY(parseInt(t.target.value))})," ",offsetColumnY,"%"]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.label,children:"aspect ratio"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.value,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"range",min:0,max:14,value:aspectRatio,onChange:t=>setAspectRatio(parseFloat(t.target.value))})," ",aspectRatioStr[aspectRatio]]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.label,children:"scaling"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.value,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"button",className:"fit"===scaling?_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.selected:"",onClick:()=>setScaling("fit"),value:"fit"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"button",className:"fill"===scaling?_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.selected:"",onClick:()=>setScaling("fill"),value:"fill"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.label,children:"alignment"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.value,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("select",{onChange:t=>setAlignment(t.target.value),value:alignment,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"center"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"top"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"bottom"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"left"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"right"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"top left"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"bottom left"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"top right"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"bottom right"})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.label,children:"direction"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.value,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("select",{onChange:t=>setDirection(t.target.value),value:direction,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"square"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"ltr"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"rtl"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"rtl-btt"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"ltr-btt"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"ttb"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"ttb-rtl"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"btt"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("option",{children:"btt-rtl"})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.label,children:"max overlap"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.value,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"range",min:0,max:100,value:maxOverlap,onChange:t=>setMaxOverlap(parseInt(t.target.value))})," ",maxOverlap,"%"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.label,children:"haphazardly"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.value,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"range",step:.1,min:0,max:2,value:haphazardly,onChange:t=>setHaphazardly(parseFloat(t.target.value))})," ",haphazardly||""]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.label,children:"example presets"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.value,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"button",onClick:()=>{setOrthogonal(!0),setGapX(0),setGapY(0),setDirection("square")},value:"grid"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"button",onClick:()=>{setOrthogonal(!1),setOffsetColumnX(100),setOffsetColumnY(0),setOffsetRowX(-50),setOffsetRowY(100),setDirection("square")},value:"hex"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"button",onClick:()=>{setOrthogonal(!1),setMaxRows(1),setOffsetColumnX(5),setOffsetColumnY(5),setOffsetRowX(0),setOffsetRowY(0),setDirection("ltr")},value:"stack"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.code,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("pre",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{children:"space.layout(Piece, {"}),(void 0!==minRows||void 0!==maxRows)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.indent,children:["rows: ",minRows===maxRows?minRows:"{"+(minRows?`min: ${minRows}`:"")+(minRows&&maxRows?", ":"")+(maxRows?`max: ${maxRows}`:"")+"}",","]}),(void 0!==minColumns||void 0!==maxColumns)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.indent,children:["columns: ",minColumns===maxColumns?minColumns:"{"+(minColumns?`min: ${minColumns}`:"")+(minColumns&&maxColumns?", ":"")+(maxColumns?`max: ${maxColumns}`:"")+"}",","]}),orthogonal&&(gapX>0||gapY>0)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.indent,children:["gap: ",gapX===gapY?gapX:`{x: ${gapX}, y: ${gapY}}`,","]}),!orthogonal&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.indent,children:["offsetRow: ",0===offsetRowX?offsetRowY:`{x: ${offsetRowX}, y: ${offsetRowY}}`,","]}),!orthogonal&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.indent,children:["offsetColumn: ",0===offsetColumnY?offsetColumnX:`{x: ${offsetColumnX}, y: ${offsetColumnY}}`,","]}),"fit"!==scaling&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.indent,children:["scaling: '",scaling,"',"]}),"center"!==alignment&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.indent,children:["alignment: '",alignment,"',"]}),"square"!==direction&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.indent,children:["direction: '",direction,"',"]}),maxOverlap<100&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.indent,children:["maxOverlap: ",maxOverlap,","]}),haphazardly>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.indent,children:["haphazardly: ",haphazardly,","]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{children:"});"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{children:"\xa0"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{children:"board.all(Piece).appearance({"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.indent,children:["aspectRatio: ",aspectRatioStr[aspectRatio]]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{children:"});"})]})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.main,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.canvas,children:board._t.children.filter((t=>t._ui.computedStyle)).map(((t,e)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:_layout_module_css__WEBPACK_IMPORTED_MODULE_1__.Z.piece,style:{left:`${t._ui.computedStyle?.left}%`,top:`${t._ui.computedStyle?.top}%`,width:`${t._ui.computedStyle?.width}%`,height:`${t._ui.computedStyle?.height}%`},children:e+1},t._t.id)))})})]})},__WEBPACK_DEFAULT_EXPORT__=Layout},841:(t,e,_)=>{_.d(e,{Z:()=>i});const i={"layout-playground":"layout-playground__gqA",main:"main_JCqP",canvas:"canvas_gc_S",piece:"piece_rE3d",selected:"selected_tWNk","parameter-controls":"parameter-controls_BnQO",label:"label_gz0R",helper:"helper_qMuu",value:"value_egX3",xyrange:"xyrange_frL6",vertical:"vertical_oVrH",code:"code_Bnle",indent:"indent_TF1b"}},8855:(t,e,_)=>{_.d(e,{Hx:()=>o,HD:()=>a});var i=_(1438);class s{isCurrent(){return this._players.currentPosition.includes(this.position)}setCurrent(){return this._players.setCurrent(this)}others(){return Array.from(this._players).filter((t=>t!==this))}other(){if(2!==this._players.length)throw Error("Can only use `other` for 2 player games");return this._players.find((t=>t!==this))}allMy(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),i=1;i<e;i++)_[i-1]=arguments[i];return"function"==typeof t&&"isGameElement"in t?this.board.all(t,{owner:this},..._):(t&&(_=[t,..._]),this.board.all({owner:this},..._))}my(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),i=1;i<e;i++)_[i-1]=arguments[i];return"function"==typeof t&&"isGameElement"in t?this.board.first(t,{owner:this},..._):(t&&(_=[t,..._]),this.board.first({owner:this},..._))}has(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),s=1;s<e;s++)_[s-1]=arguments[s];return"function"==typeof t&&"isGameElement"in t?this.board.has(t,{owner:this},..._):(t&&(_=[t,..._]),this.board.has(i.Z,{owner:this},..._))}toJSON(){let{_players:t,board:e,game:_,...i}=this;return i=Object.fromEntries(Object.entries(i).filter((t=>{let[,e]=t;return"function"!=typeof e}))),i}toString(){return this.name}}const r=function(t,e){return void 0===e&&(e=!0),t instanceof s?`$p[${t.position}]`:t instanceof i.Z?e?`$el[${t.branch()}]`:`$eid[${t._t.id}]`:t},n=(t,e)=>{if("number"==typeof t||"boolean"==typeof t)return t;let _;if("$p["===t.slice(0,3))_=e.players.atPosition(parseInt(t.slice(3,-1)));else if("$el["===t.slice(0,4))_=e.board.atBranch(t.slice(4,-1));else{if("$eid["!==t.slice(0,5))return t;_=e.board.atID(parseInt(t.slice(5,-1)))}if(!_)throw Error(`Unable to find arg: ${t}`);return _},a=function(t,e){return void 0===e&&(e=!0),Object.fromEntries(Object.entries(t).map((t=>{let[_,i]=t;return[_,l(i,e)]})))},o=(t,e)=>Object.fromEntries(Object.entries(t).map((t=>{let[_,i]=t;return[_,c(i,e)]}))),l=function(t,e){if(void 0===e&&(e=!0),void 0!==t){if(null===t)return null;if(t instanceof Array)return t.map((t=>l(t,e)));if(t instanceof s||t instanceof i.Z)return r(t,e);if("object"==typeof t)return a(t,e);if("number"==typeof t||"string"==typeof t||"boolean"==typeof t)return r(t,e);throw Error(`unable to serialize ${t}`)}},c=(t,e)=>{if(void 0!==t){if(null===t)return null;if(t instanceof Array)return t.map((t=>c(t,e)));if("object"==typeof t)return o(t,e);if("number"==typeof t||"string"==typeof t||"boolean"==typeof t)return n(t,e);throw Error(`unable to deserialize ${t}`)}}},3927:(t,e,_)=>{_.d(e,{Z:()=>r});var i=_(1745),s=_(8855);class r extends i.Z{constructor(t){super({...t,trackMovement:!1}),this._ui={boardSize:{name:"_default",aspectRatio:1},layouts:[],appearance:{},stepLayouts:{},previousStyles:{}},this.board=this,this._ctx.removed=this.createElement(i.Z,"removed"),this.pile=this._ctx.removed}registerClasses(){for(var t=arguments.length,e=new Array(t),_=0;_<t;_++)e[_]=arguments[_];this._ctx.classRegistry=this._ctx.classRegistry.concat(e)}allJSON(t){return[this.toJSON(t)].concat(this._ctx.removed._t.children.map((e=>e.toJSON(t))))}fromJSON(t){let{className:e,children:_,_id:i,order:r,...n}=t[0];if(this._ctx.game&&(n=(0,s.Hx)({...n},this._ctx.game)),this.constructor.name!==e)throw Error(`Cannot create board from JSON. ${e} must equal ${this.constructor.name}`);for(const s of Object.keys(this))["_ctx","_t","_ui","_eventHandlers","board","game","pile"].includes(s)||s in n||(n[s]=void 0);Object.assign(this,{...n}),_&&this.createChildrenFromJSON(_,"0"),r&&(this._t.order=r),this._ctx.removed.createChildrenFromJSON(t.slice(1),"1")}resetUI(){var t;super.resetUI(),this._ui.stepLayouts={"step:out-of-turn":{element:this,top:0,left:0}},(t=this._ui).previousStyles||(t.previousStyles={})}setBoardSize(t){t.name!==this._ui.boardSize.name&&(this._ui.boardSize=t)}getBoardSize(t,e,_){return this._ui.boardSizes&&this._ui.boardSizes(t,e,_)||{name:"_default",aspectRatio:1}}applyLayouts(t){this._ui.setupLayout&&(this.resetUI(),this._ui.setupLayout(this,this._ctx.player,this._ui.boardSize.name)),t&&t(this);const e=this._ui.boardSize.aspectRatio;return this._ui.frame={left:0,top:0,width:e<1?100*e:100,height:e>1?100/e:100},super.applyLayouts()}layoutStep(t,e){if("out-of-turn"!==t&&!this._ctx.game.flow.getStep(t))throw Error(`No such step: ${t}`);this._ui.stepLayouts["step:"+t]=e}layoutAction(t,e){this._ui.stepLayouts["action:"+t]=e}disableDefaultAppearance(){this._ui.disabledDefaultAppearance=!0}}},7712:(t,e,_)=>{_.d(e,{Z:()=>s});var i=_(1438);class s extends Array{slice(){return super.slice(...arguments)}filter(){return super.filter(...arguments)}all(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),s=1;s<e;s++)_[s-1]=arguments[s];return"function"==typeof t&&"isGameElement"in t?this._finder(t,{},..._):(t&&(_=[t,..._]),this._finder(i.Z,{},..._))}_finder(t,e){for(var _=arguments.length,i=new Array(_>2?_-2:0),r=2;r<_;r++)i[r-2]=arguments[r];const n=new s;if(void 0!==e.limit&&e.limit<=0)return n;const a=i.map((t=>{if("object"==typeof t){const e=t;return t=>Object.entries(e).every((e=>{let[_,i]=e;return("empty"===_?t.isEmpty():t[_])===i}))}if("string"==typeof t){const e=t;return t=>t.name===e}return t})),o=(_,s)=>{_ instanceof t&&a.every((t=>t(_)))&&("asc"===s?n.push(_):n.unshift(_)),void 0!==e.limit?n.push(..._._t.children._finder(t,{limit:e.limit-n.length,order:e.order},...i)):n.push(..._._t.children._finder(t,{},...i))};if("desc"===e.order)for(let s=this.length-1;s>=0;s--){const t=this[s];if(void 0!==e.limit&&n.length>=e.limit)break;o(t,"desc")}else for(const s of this){if(void 0!==e.limit&&n.length>=e.limit)break;o(s,"asc")}return n}first(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),s=1;s<e;s++)_[s-1]=arguments[s];return"function"==typeof t&&"isGameElement"in t?this._finder(t,{limit:1},..._)[0]:(t&&(_=[t,..._]),this._finder(i.Z,{limit:1},..._)[0])}firstN(t,e){for(var _=arguments.length,s=new Array(_>2?_-2:0),r=2;r<_;r++)s[r-2]=arguments[r];if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._finder(e,{limit:t},...s):(e&&(s=[e,...s]),this._finder(i.Z,{limit:t},...s))}last(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),s=1;s<e;s++)_[s-1]=arguments[s];return"function"==typeof t&&"isGameElement"in t?this._finder(t,{limit:1,order:"desc"},..._)[0]:(t&&(_=[t,..._]),this._finder(i.Z,{limit:1,order:"desc"},..._)[0])}lastN(t,e){for(var _=arguments.length,s=new Array(_>2?_-2:0),r=2;r<_;r++)s[r-2]=arguments[r];if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._finder(e,{limit:t,order:"desc"},...s):(e&&(s=[e,...s]),this._finder(i.Z,{limit:t,order:"desc"},...s))}top(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),s=1;s<e;s++)_[s-1]=arguments[s];return"function"==typeof t&&"isGameElement"in t?this._finder(t,{limit:1},..._)[0]:(t&&(_=[t,..._]),this._finder(i.Z,{limit:1},..._)[0])}topN(t,e){for(var _=arguments.length,s=new Array(_>2?_-2:0),r=2;r<_;r++)s[r-2]=arguments[r];if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._finder(e,{limit:t},...s):(e&&(s=[e,...s]),this._finder(i.Z,{limit:t},...s))}bottom(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),s=1;s<e;s++)_[s-1]=arguments[s];return"function"==typeof t&&"isGameElement"in t?this._finder(t,{limit:1,order:"desc"},..._)[0]:(t&&(_=[t,..._]),this._finder(i.Z,{limit:1,order:"desc"},..._)[0])}bottomN(t,e){for(var _=arguments.length,s=new Array(_>2?_-2:0),r=2;r<_;r++)s[r-2]=arguments[r];if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._finder(e,{limit:t,order:"desc"},...s):(e&&(s=[e,...s]),this._finder(i.Z,{limit:t,order:"desc"},...s))}showToAll(){for(const t of this)delete t._visible}showOnlyTo(t){"number"!=typeof t&&(t=t.position);for(const e of this)e._visible={default:!1,except:[t]}}showTo(){for(var t=arguments.length,e=new Array(t),_=0;_<t;_++)e[_]=arguments[_];"number"!=typeof e[0]&&(e=e.map((t=>t.position)));for(const i of this)if(void 0!==i._visible)if(i._visible.default){if(!i._visible.except)continue;i._visible.except=i._visible.except.filter((t=>!e.includes(t)))}else i._visible.except=Array.from(new Set([...i._visible.except instanceof Array?i._visible.except:[],...e]))}hideFromAll(){for(const t of this)t._visible={default:!1}}hideFrom(){for(var t=arguments.length,e=new Array(t),_=0;_<t;_++)e[_]=arguments[_];"number"!=typeof e[0]&&(e=e.map((t=>t.position)));for(const i of this)if(!1!==i._visible?.default||i._visible.except)if(void 0===i._visible||!0===i._visible.default)i._visible={default:!0,except:Array.from(new Set([...i._visible?.except instanceof Array?i._visible.except:[],...e]))};else{if(!i._visible.except)continue;i._visible.except=i._visible.except.filter((t=>!e.includes(t)))}}sortBy(t,e){const _=(t,e)=>"function"==typeof e?e(t):t[e],[i,s]="desc"===e?[-1,1]:[1,-1];return this.sort(((e,r)=>{const n=t instanceof Array?t:[t];for(const t of n){const n=_(e,t),a=_(r,t);if(n>a)return i;if(n<a)return s}return 0}))}sortedBy(t,e){return void 0===e&&(e="asc"),this.slice(0,this.length).sortBy(t,e)}sum(t){return this.reduce(((e,_)=>e+("function"==typeof t?t(_):_[t])),0)}withHighest(){for(var t=arguments.length,e=new Array(t),_=0;_<t;_++)e[_]=arguments[_];return this.sortedBy(e,"desc")[0]}withLowest(){for(var t=arguments.length,e=new Array(t),_=0;_<t;_++)e[_]=arguments[_];return this.sortedBy(e,"asc")[0]}max(t){const e=this.sortedBy(t,"desc")[0];if(e)return"function"==typeof t?t(e):e[t]}min(t){const e=this.sortedBy(t,"asc")[0];if(e)return"function"==typeof t?t(e):e[t]}areAllEqual(t){return 0===this.length||this.every((e=>e[t]===this[0][t]))}remove(){for(const t of this){if("isSpace"in t)throw Error("cannot move Space");t.remove()}}putInto(t,e){this.some((t=>t.hasChangedParent()))&&t.game.addDelay();for(const _ of this){if("isSpace"in _)throw Error("cannot move Space");_.putInto(t,e)}}layout(t,e){for(const _ of this)_.layout(t,e)}appearance(t){for(const e of this)e.appearance(t)}}},1438:(t,e,_)=>{_.d(e,{Z:()=>u});var i=_(7712);const s=(t,e)=>Array.from(Array(t)).map(((t,_)=>e(_+1)));function r(t,e){return function(t,e){return{left:t.left+e.x,top:t.top+e.y,width:t.width,height:t.height}}((_=t,i={x:e.width/100,y:e.height/100},{left:_.left*i.x,top:_.top*i.y,width:_.width*i.x,height:_.height*i.y}),{x:e.left,y:e.top});var _,i}function n(t,e,_,i,s,r,n,a,o,l){if(!(t>s||e>r))return t-=1,e-=1,{left:_.left+n.x+(a?t*(i.width+a.x):i.width*(t*o.x+e*l.x)/100),top:_.top+n.y+(a?e*(i.height+a.y):i.height*(e*l.y+t*o.y)/100),width:i.width,height:i.height}}function a(t,e,_,i,s,r){let n,a;return void 0===s?(n=(_.width-(i.x||0)*(e-1))/e,a=(_.height-(i.y||0)*(t-1))/t):(n=_.width/((t-1)*Math.abs(r.x/100)+1+(e-1)*Math.abs(s.x/100)),a=_.height/((e-1)*Math.abs(s.y/100)+1+(t-1)*Math.abs(r.y/100))),{width:n,height:a}}function o(t,e,_,i,s,r,a,o){const l=[n(1,1,t,e,_,i,s,r,a,o),n(1,i,t,e,_,i,s,r,a,o),n(_,i,t,e,_,i,s,r,a,o),n(_,1,t,e,_,i,s,r,a,o)],c={top:Math.min(...l.map((t=>t.top))),bottom:Math.max(...l.map((t=>t.top+t.height))),left:Math.min(...l.map((t=>t.left))),right:Math.max(...l.map((t=>t.left+t.width)))};return{width:c.right-c.left,height:c.bottom-c.top,left:c.left,top:c.top}}var l=_(8855),c=_(3801);class h{constructor(t){this._ui={layouts:[],appearance:{}},this._ctx=t,t.top||(this._ctx.top=this,this._ctx.sequence=0),this._ctx.namedSpaces||(this._ctx.uniqueNames={},this._ctx.namedSpaces={}),this.game=this._ctx.game,this._t={children:new i.Z,id:this._ctx.sequence++,setId:t=>{void 0!==t&&(this._t.id=t,this._ctx.sequence<t&&(this._ctx.sequence=t))}}}toString(){return this.name||this.constructor.name.replace(/([a-z0-9])([A-Z])/g,"$1 $2")}all(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),i=1;i<e;i++)_[i-1]=arguments[i];return"function"==typeof t&&"isGameElement"in t?this._t.children.all(t,..._):(t&&(_=[t,..._]),this._t.children.all(h,..._))}first(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),i=1;i<e;i++)_[i-1]=arguments[i];return"function"==typeof t&&"isGameElement"in t?this._t.children._finder(t,{limit:1},..._)[0]:(t&&(_=[t,..._]),this._t.children._finder(h,{limit:1},..._)[0])}firstN(t,e){for(var _=arguments.length,i=new Array(_>2?_-2:0),s=2;s<_;s++)i[s-2]=arguments[s];if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._t.children._finder(e,{limit:t},...i):(e&&(i=[e,...i]),this._t.children._finder(h,{limit:t},...i))}last(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),i=1;i<e;i++)_[i-1]=arguments[i];return"function"==typeof t&&"isGameElement"in t?this._t.children._finder(t,{limit:1,order:"desc"},..._)[0]:(t&&(_=[t,..._]),this._t.children._finder(h,{limit:1,order:"desc"},..._)[0])}lastN(t,e){if("number"!=typeof t)throw Error("first argument must be number of matches");for(var _=arguments.length,i=new Array(_>2?_-2:0),s=2;s<_;s++)i[s-2]=arguments[s];return"function"==typeof e&&"isGameElement"in e?this._t.children._finder(e,{limit:t,order:"desc"},...i):this._t.children._finder(h,{limit:t,order:"desc"},e,...i)}top(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),i=1;i<e;i++)_[i-1]=arguments[i];return"function"==typeof t&&"isGameElement"in t?this._t.children.all(t,..._)[0]:(t&&(_=[t,..._]),this._t.children._finder(h,{limit:1},..._)[0])}topN(t,e){for(var _=arguments.length,i=new Array(_>2?_-2:0),s=2;s<_;s++)i[s-2]=arguments[s];if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._t.children._finder(e,{limit:t},...i):(e&&(i=[e,...i]),this._t.children._finder(h,{limit:t},...i))}bottom(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),i=1;i<e;i++)_[i-1]=arguments[i];return"function"==typeof t&&"isGameElement"in t?this._t.children._finder(t,{limit:1,order:"desc"},..._)[0]:(t&&(_=[t,..._]),this._t.children._finder(h,{limit:1,order:"desc"},..._)[0])}bottomN(t,e){for(var _=arguments.length,i=new Array(_>2?_-2:0),s=2;s<_;s++)i[s-2]=arguments[s];if("number"!=typeof t)throw Error("first argument must be number of matches");return"function"==typeof e&&"isGameElement"in e?this._t.children._finder(e,{limit:t,order:"desc"},...i):(e&&(i=[e,...i]),this._t.children._finder(h,{limit:t,order:"desc"},...i))}others(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),s=1;s<e;s++)_[s-1]=arguments[s];if(this._t.parent||new i.Z,"function"!=typeof t||!("isGameElement"in t)){t&&(_=[t,..._]);const e=this._otherFinder(_);return this._t.parent._t.children._finder(h,{},e,..._)}const r=this._otherFinder(_);return this._t.parent._t.children._finder(t,{},r,..._)}has(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),i=1;i<e;i++)_[i-1]=arguments[i];return"function"==typeof t&&"isGameElement"in t?!!this.first(t,..._):(t&&(_=[t,..._]),!!this.first(h,..._))}adjacentTo(t){return this._t.parent?._t.graph?this._t.parent._t.graph.areNeighbors(this._t.id,t._t.id):void 0!==this.row&&void 0!==this.column&&(void 0!==t.row&&void 0!==t.column&&(this.column===t.column&&[t.row+1,t.row-1].includes(this.row)||this.row===t.row&&[t.column+1,t.column-1].includes(this.column)))}adjacencies(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),s=1;s<e;s++)_[s-1]=arguments[s];let r=h;return"function"==typeof t&&"isGameElement"in t?r=t:t&&(_=[t,..._]),this._t.parent?._t.graph?new i.Z(...this._t.parent?._t.graph.mapNeighbors(this._t.id,(t=>this._t.parent._t.graph.getNodeAttribute(t,"space")))).all(r,..._):void 0!==this.row&&void 0!==this.column&&this._t.parent?this._t.parent._t.children.filter((t=>void 0!==t.row&&void 0!==t.column&&(this.column===t.column&&[t.row+1,t.row-1].includes(this.row)||this.row===t.row&&[t.column+1,t.column-1].includes(this.column)))):new i.Z}_otherFinder(t){return t=>t!==this}setOrder(t){this._t.order=t}container(t){return t?this._t.parent?this._t.parent instanceof t?this._t.parent:this._t.parent.container(t):void 0:this._t.parent}isEmpty(){return!this._t.children.length}sortBy(t,e){return this._t.children.sortBy(t,e)}shuffle(){((t,e)=>{for(let _=t.length-1;_>0;_--){const i=Math.floor(e()*(_+1));[t[_],t[i]]=[t[i],t[_]]}})(this._t.children,this._ctx.game?.random||Math.random)}get owner(){return void 0!==this.player?this.player:this._t.parent?.owner}get mine(){return!!this._ctx.player&&this.owner===this._ctx.player}showToAll(){delete this._visible}showOnlyTo(t){"number"!=typeof t&&(t=t.position),this._visible={default:!1,except:[t]}}showTo(){for(var t=arguments.length,e=new Array(t),_=0;_<t;_++)e[_]=arguments[_];if("number"!=typeof e[0]&&(e=e.map((t=>t.position))),void 0!==this._visible)if(this._visible.default){if(!this._visible.except)return;this._visible.except=this._visible.except.filter((t=>!e.includes(t)))}else this._visible.except=Array.from(new Set([...this._visible.except instanceof Array?this._visible.except:[],...e]))}hideFromAll(){this._visible={default:!1}}hideFrom(){for(var t=arguments.length,e=new Array(t),_=0;_<t;_++)e[_]=arguments[_];if("number"!=typeof e[0]&&(e=e.map((t=>t.position))),!1!==this._visible?.default||this._visible.except)if(void 0===this._visible||!0===this._visible.default)this._visible={default:!0,except:Array.from(new Set([...this._visible?.except instanceof Array?this._visible.except:[],...e]))};else{if(!this._visible.except)return;this._visible.except=this._visible.except.filter((t=>!e.includes(t)))}}isVisibleTo(t){return"number"!=typeof t&&(t=t.position),void 0===this._visible||(this._visible.default?!this._visible.except||!this._visible.except.includes(t):this._visible.except?.includes(t)||!1)}isVisible(){if(!this._ctx.player)throw Error("Cannot use isVisible outside of a player context");return this.isVisibleTo(this._ctx.player.position)}static revealWhenHidden(){for(var t=arguments.length,e=new Array(t),_=0;_<t;_++)e[_]=arguments[_];this.visibleAttributes=e}create(t,e,_){if("started"===this._ctx.game?.phase)throw Error("Board elements cannot be created once game has started.");const i=this.createElement(t,e,_);return i._t.parent=this,"stacking"===this._t.order?this._t.children.unshift(i):this._t.children.push(i),"isSpace"in i&&e&&(e in this._ctx.uniqueNames?(delete this._ctx.namedSpaces[e],this._ctx.uniqueNames[e]=!1):(this._ctx.namedSpaces[e]=i,this._ctx.uniqueNames[e]=!0)),i}createMany(t,e,_,r){return new i.Z(...s(t,(t=>this.create(e,_,"function"==typeof r?r(t):r))))}createGrid(t,e,_,r){let{rows:n,columns:a,style:o}=t;const l=new i.Z;return s(n,(t=>s(a,(i=>{const s=this.create(e,_,{row:t,column:i,...r});return l[(t-1)*a+i-1]=s,t>1&&s.connectTo(l[(t-2)*a+i-1]),i>1&&s.connectTo(l[(t-1)*a+i-2]),"hex"===o&&t>1&&i>1&&s.connectTo(l[(t-2)*a+i-2]),"hex-inverse"===o&&t>1&&i<a&&s.connectTo(l[(t-2)*a+i]),s})))),l}createElement(t,e,_){if(!this._ctx.classRegistry.includes(t)){const e=this._ctx.classRegistry.find((e=>e.name===t.name));if(!e)throw Error(`No class found ${t.name}. Declare any classes in \`board.registerClasses\``);t=e}const i=new t(this._ctx);return i.board=this.board,i.name=e,Object.assign(i,_),i}branch(){const t=[];let e=this;for(;e._t.parent;){if(-1===e._t.parent._t.children.indexOf(e))throw Error(`Reference to element ${this.constructor.name}${this.name?":"+this.name:""} is no longer current`);t.unshift(e._t.parent._t.children.indexOf(e)),e=e._t.parent}return t.unshift(this._ctx.removed===e?1:0),t.join("/")}atBranch(t){let e=t.split("/"),_=parseInt(e[0]),i=0===_?this._ctx.top:this._ctx.removed._t.children[_-1];for(e.shift();void 0!==e[0];)i=i._t.children[parseInt(e[0])],e.shift();return i}atID(t){return this._t.children.find((e=>e._t.id===t))||this._t.children.find((e=>e.atID(t)))?.atID(t)}atPosition(t){let{column:e,row:_}=t;return this._t.children.find((t=>t.row===_&&t.column===e))}isDescendantOf(t){return this._t.parent===t||!!this._t.parent?.isDescendantOf(t)}attributeList(){let t;({...t}=this);for(const e of["_t","_ctx","_ui","board","game","pile","_eventHandlers"])delete t[e];return Object.fromEntries(Object.entries(t).filter((t=>{let[,e]=t;return"function"!=typeof e})))}toJSON(t){let e=this.attributeList();void 0===t||this.isVisibleTo(t)||(e=Object.fromEntries(Object.entries(e).filter((t=>{let[e]=t;return"_visible"===e||"name"!==e&&this.constructor.visibleAttributes?.includes(e)}))));const _=Object.assign((0,l.HD)(e,void 0!==t),{className:this.constructor.name});return(void 0===t||"isSpace"in this||e.name)&&(_._id=this._t.id),this._t.order&&(_.order=this._t.order),this._t.was&&(_.was=this._t.was),t&&this._t.was&&"stacking"===this._t.parent?._t.order&&!this.hasChangedParent()&&!this.isVisibleTo(t)&&(_.was=this.branch()),!this._t.children.length||t&&!this.isVisibleTo(t)||(_.children=Array.from(this._t.children.map((e=>e.toJSON(t))))),_}createChildrenFromJSON(t,e){const _=[...this._t.children];this._t.children=new i.Z;for(let i=0;i!==t.length;i++){const s=t[i];let r,{className:n,children:a,was:o,_id:c,name:h,order:u,...d}=s;if(this._ctx.game&&(d=(0,l.Hx)({...d},this._ctx.game)),void 0!==c&&(r=_.find((t=>t._t.id===c&&t.name===h)),r)){for(const t of Object.keys(r))["_ctx","_t","_ui","_eventHandlers","board","game","name","row","column"].includes(t)||t in d||(d[t]=void 0);Object.assign(r,d)}if(!r){const t=this._ctx.classRegistry.find((t=>t.name===n));if(!t)throw Error(`No class found ${n}. Declare any classes in \`game.defineBoard\``);r=this.createElement(t,h,d),r._t.setId(c),r._t.parent=this,r._t.order=u}r._t.was=o,this._ctx.trackMovement&&!("isSpace"in r)&&(r._t.was=e+"/"+i),this._t.children.push(r),r.createChildrenFromJSON(a||[],e+"/"+i)}}cloneInto(t){let e=this.attributeList();const _=t.createElement(this.constructor,this.name,e);"stacking"===t._t.order?t._t.children.unshift(_):t._t.children.push(_),_._t.parent=t,_._t.order=this._t.order;for(const i of this._t.children)i.cloneInto(_);return _}resetUI(){this._ui.layouts=[{applyTo:h,attributes:{margin:0,scaling:"fit",alignment:"center",gap:0,direction:"square"}}],this._ui.appearance={},this._ui.computedStyle=void 0;for(const t of this._t.children)t.resetUI()}absoluteTransform(t){return t??(t=this.relativeTransformToBoard()),this.board._ui.frame?r(t,this.board._ui.frame):t}relativeTransformToBoard(){let t=this._ui.computedStyle||{left:0,top:0,width:100,height:100},e=this._t.parent;for(;e?._ui.computedStyle;)t=r(t,e._ui.computedStyle),e=e._t.parent;return t}layout(t,e){let{slots:_,area:i,size:s,aspectRatio:r,scaling:n,gap:a,margin:o,offsetColumn:l,offsetRow:c}=e;0===this._ui.layouts.length&&this.resetUI(),_&&(i||o||n||a||o||l||c)&&console.warn("Layout has `slots` which overrides supplied grid parameters"),i&&o&&console.warn("Both `area` and `margin` supplied in layout. `margin` is ignored"),s&&r&&console.warn("Both `size` and `aspectRatio` supplied in layout. `aspectRatio` is ignored"),s&&n&&console.warn("Both `size` and `scaling` supplied in layout. `scaling` is ignored"),s||n||(n="fit"),a&&(l||c)&&console.warn("Both `gap` and `offset` supplied in layout. `gap` is ignored"),o||i||(e.margin=0),this._ui.layouts.push({applyTo:t,attributes:{alignment:"center",direction:"square",...e}})}applyLayouts(){if(!1===this._ui.appearance.render)return;const t=this.getLayoutItems(),e=this.absoluteTransform();for(let _=this._ui.layouts.length-1;_>=0;_--){const{attributes:i}=this._ui.layouts[_];let s=t[_];const{slots:r,direction:l,gap:h,scaling:u,alignment:d,maxOverlap:m}=i;let{size:f,aspectRatio:p,haphazardly:E}=i;const x=this.getArea(i);let y=r||[];this._ui.computedLayouts||(this._ui.computedLayouts=[]),this._ui.computedLayouts[_]={area:x,children:s??[],showBoundingBox:i.showBoundingBox,drawer:i.drawer};let M="number"==typeof i.columns?i.columns:i.columns?.min||1,O="number"==typeof i.rows?i.rows:i.rows?.min||1;if(!s?.length&&1===O&&1===M)continue;if(s??(s=[]),!r){const t=[],r={},c={};for(let e=0;e!=s.length;e++){const _=s[e];void 0!==_.column&&void 0!==_.row&&(t[e]=[_.column,_.row],(void 0===r.column||_.column<r.column)&&(r.column=_.column),(void 0===r.row||_.row<r.row)&&(r.row=_.row),(void 0===c.column||_.column>c.column)&&(c.column=_.column),(void 0===c.row||_.row>c.row)&&(c.row=_.row))}r.column??(r.column=1),r.row??(r.row=1),c.column??(c.column=1),c.row??(c.row=1),M=Math.max(M,c.column-r.column+1),O=Math.max(O,c.row-r.row+1);let g="number"==typeof i.columns?i.columns:i.columns?.max||1/0,D="number"==typeof i.rows?i.rows:i.rows?.max||1/0,P=M,v=O,b={column:1,row:1};const w={left:d.includes("left")?0:d.includes("right")?1:.5,top:d.includes("top")?0:d.includes("bottom")?1:.5};if(s.length){let e,_,n;"square"===l?(P=Math.max(M,Math.min(g,Math.ceil(s.length/O),Math.max(Math.ceil(s.length/D),Math.ceil(Math.sqrt(s.length))))),v=Math.max(O,Math.min(D,Math.ceil(s.length/M),Math.ceil(s.length/P)))):v*P<s.length&&(["ltr","ltr-btt","rtl","rtl-btt"].includes(l)&&(P=Math.max(P,Math.min(g,Math.ceil(s.length/v))),v=Math.max(v,Math.min(D,Math.ceil(s.length/P)))),["ttb","btt","ttb-rtl","btt-rtl"].includes(l)&&(v=Math.max(v,Math.min(D,Math.ceil(s.length/P))),P=Math.max(P,Math.min(g,Math.ceil(s.length/v))))),b={column:Math.min(r.column,c.column,Math.max(1,c.column-P+1)),row:Math.min(r.row,c.row,Math.max(1,c.row-v+1))};let a=l;switch("square"===a&&(a=["left","top left","top","center"].includes(d)?"ltr":["right","top right"].includes(d)?"rtl":["bottom","bottom left"].includes(d)?"ltr-btt":"rtl-btt"),a){case"ltr":e={x:1,y:1},_={x:1,y:0},n={x:-P,y:1};break;case"rtl":e={x:P,y:1},_={x:-1,y:0},n={x:P,y:1};break;case"ttb":e={x:1,y:1},_={x:0,y:1},n={x:1,y:-v};break;case"btt":e={x:1,y:v},_={x:0,y:-1},n={x:1,y:v};break;case"ltr-btt":e={x:1,y:v},_={x:1,y:0},n={x:-P,y:-1};break;case"rtl-btt":e={x:P,y:v},_={x:-1,y:0},n={x:P,y:-1};break;case"ttb-rtl":e={x:P,y:1},_={x:0,y:1},n={x:-1,y:-v};break;case"btt-rtl":e={x:P,y:v},_={x:0,y:-1},n={x:-1,y:v}}let o=0;for(;o!=s.length;){const r=s[o];if(void 0===r.column||void 0===r.row){const s=[e.x+b.column-1,e.y+b.row-1];if(t.every((t=>{let[e,_]=t;return e!==s[0]||_!==s[1]}))&&(t[o]=s,i.sticky&&(r.column=s[0],r.row=s[1]),o++),e.x+=_.x,e.y+=_.y,(e.x>P||e.x<=0||e.y>v||e.y<=0)&&(e.x+=n.x,e.y+=n.y),e.x>P||e.x<=0||e.y>v||e.y<=0)break}else o++}}let C,R,A;if(i.offsetColumn||i.offsetRow?(A="number"==typeof i.offsetColumn?{x:i.offsetColumn,y:0}:i.offsetColumn,R="number"==typeof i.offsetRow?{x:0,y:i.offsetRow}:i.offsetRow,R||(R={x:-A.y,y:A.x}),A||(A={x:R.y,y:-R.x})):C={x:(h&&("number"==typeof h?h:h.x)||0)/e.width*100,y:(h&&("number"==typeof h?h:h.y)||0)/e.height*100},!f){if(f=a(v,P,x,C,A,R),!p){let t=1/0,e=0;for(const _ of s){const i=_._ui.appearance.aspectRatio;void 0!==i&&(i<t&&(t=i),i>e&&(e=i))}(t<1/0||e>0)&&(p=e>1&&t<1?1:t>1?t:e)}p&&(p*=e.height/e.width,p>f.width/f.height?f.height=f.width/p:f.width=p*f.height)}if(!s.length){this._ui.computedLayouts[_].grid={anchor:{x:0,y:0},origin:b,rows:v,columns:P,offsetColumn:A??{x:f.width+C.x,y:0},offsetRow:R??{x:0,y:f.height+C.y}};continue}E?E*=.2+Math.max(0,C?C.x/f.width+C.y/f.height:(Math.abs(A.x)+Math.abs(A.y)+Math.abs(R.y)+Math.abs(A.y)-200)/100):E=0;const j={x:0,y:0};let T=o(x,f,P,v,j,C,A,R),I={x:1,y:1};if(u){if("fill"===u){const t=Math.max(x.width/T.width,x.height/T.height);I={x:t,y:t}}else if("fit"===u&&i.size){const t=Math.min(x.width/T.width,x.height/T.height);I={x:t,y:t}}const t=a(O,M,x,C,A,R);if(void 0!==m){const e=a(v,P,x,void 0,{x:Math.min(100-m,A?.x??100),y:Math.min(100-m,A?.y??0)},{x:Math.min(100-m,R?.x??0),y:Math.min(100-m,R?.y??100)});t.width=Math.min(t.width,e.width),t.height=Math.min(t.height,e.height)}if(f.width*I.x>t.width){const e=t.width/f.width/I.x;I.x*=e,I.y*=e}if(f.height*I.y>t.height){const e=t.height/f.height/I.y;I.x*=e,I.y*=e}f.width*=I.x,f.height*=I.y}if(C){"fill"===u&&(v>1&&(C.y=Math.min(C.y||0,(x.height-v*f.height)/(v-1))),P>1&&(C.x=Math.min(C.x||0,(x.width-P*f.width)/(P-1))));const t=P*(f.width+C.x)-C.x;j.x+=w.left*(x.width-t);const e=v*(f.height+C.y)-C.y;j.y+=w.top*(x.height-e)}else{if("fit"!==u){if(x.width*I.x/T.width>x.height*I.y/T.height){const t=(x.height-f.height)/(T.height*I.y-f.height);t<1&&(I.y=I.x=x.height/T.height,A.y*=t,R.y*=t)}else{const t=(x.width-f.width)/(T.width*I.x-f.width);t<1&&(I.y=I.x=x.width/T.width,A.x*=t,R.x*=t)}T=o(x,f,P,v,j,C,A,R)}j.x+=x.left-T.left*I.x+w.left*(x.width-T.width*I.x),j.y+=x.top-T.top*I.y+w.top*(x.height-T.height*I.y)}for(let e=0;e<s.length&&e<t.length;e++){let[_,i]=t[e];_-=b.column-1,i-=b.row-1;const s=n(_,i,x,f,P,v,j,C,A,R);s&&(y[e]=s)}this._ui.computedLayouts[_].grid={anchor:j,origin:b,rows:v,columns:P,offsetColumn:A??{x:f.width+C.x,y:0},offsetRow:R??{x:0,y:f.height+C.y}}}const g=c.create("ge"+this.name).random;for(let t=0;t!==s.length;t++){const _=y[t];if(!_)continue;const i=s[t];let r=i._ui.appearance.aspectRatio;r&&(r*=e.height/e.width);let{width:n,height:a}=_;r&&r!==n/a&&(r>n/a?a=n/r:n=r*a);let o=_.left+(_.width-n)/2,l=_.top+(_.height-a)/2;if(E){let t={x:0,y:0},e=1/0;for(let _=0;_<10;_++){const _=g(),i=g(),r={x:E?Math.min(x.left+x.width-o-n,Math.max(x.left-o,(_-((o-x.left)/(x.width-n)-.5)/2-.5)*E*(f.width+f.height))):0,y:E?Math.min(x.top+x.height-l-a,Math.max(x.top-l,(i-((l-x.top)/(x.height-a)-.5)/2-.5)*E*(f.width+f.height))):0};let c=1/0;if(s.every((t=>{if(!t._ui.computedStyle)return!0;const e=t._ui.computedStyle,_=Math.min(Math.max(0,e.left+e.width-o-r.x),Math.max(0,e.top+e.height-l-r.y),Math.max(0,o+n+r.x-e.left),Math.max(0,l+a+r.y-e.top));if(0===_)return!0;c=Math.min(_,c)}))){t=r;break}c<e&&(e=c,t=r)}o+=t.x,l+=t.y}i._ui.computedStyle={width:n,height:a,left:o,top:l},i.applyLayouts()}}}getLayoutItems(){const t=[],e=[...this._ui.layouts].sort(((t,e)=>{let _=0,i=0;if(t.applyTo instanceof h&&(_=3),e.applyTo instanceof h&&(i=3),"string"==typeof t.applyTo&&(_=2),"string"==typeof e.applyTo&&(i=2),t.applyTo instanceof Array&&(_=1),e.applyTo instanceof Array&&(i=1),0!==_||0!==i)return _-i;const s=t.applyTo,r=e.applyTo;return s.prototype instanceof r?1:r.prototype instanceof s?-1:0})).reverse();for(const _ of this._t.children)if(!1!==_._ui.appearance.render)for(const s of e){const{applyTo:e,attributes:r}=s,n=this._ui.layouts.indexOf(s);if("function"==typeof e&&_ instanceof e||"string"==typeof e&&_.name===e||_===e||e instanceof i.Z&&e.includes(_)){if(void 0!==r.limit&&r.limit<=(t[n]?.length??0))break;t[n]??(t[n]=[]),"stacking"===this._t.order?t[n].unshift(_):t[n].push(_);break}}return t}getArea(t){let{area:e,margin:_}=t;if(e)return e;if(!_)return{left:0,top:0,width:100,height:100};const i=this.absoluteTransform(),s=i.width/100,r=i.height/100;return _="number"==typeof _?{left:_,right:_,top:_,bottom:_}:{..._},_.left/=s,_.right/=s,_.top/=r,_.bottom/=r,{left:_.left,top:_.top,width:100-_.left-_.right,height:100-_.top-_.bottom}}appearance(t){Object.assign(this._ui.appearance,t)}resetMovementTracking(){this._t.was=this.branch();for(const t of this._t.children)t.resetMovementTracking()}hasChangedParent(){const t=this.branch();return!(!this._t.was||this._t.was===t)&&this._t.was?.substring(0,this._t.was?.lastIndexOf("/"))!==t.substring(0,t.lastIndexOf("/"))}}h.isGameElement=!0;const u=h},1745:(t,e,_)=>{_.d(e,{Z:()=>o});var i=_(1438),s=_(7712),r=_(7575),n=_(8063),a=_(5279);class o extends i.Z{constructor(){super(...arguments),this._eventHandlers={enter:[],exit:[]}}isSpace(){return!0}create(t,e,_){const i=super.create(t,e,_);return this.triggerEvent("enter",i),i}addEventHandler(t,e){this._eventHandlers[t].push(e)}onEnter(t,e){this.addEventHandler("enter",{callback:e,type:t})}onExit(t,e){this.addEventHandler("exit",{callback:e,type:t})}triggerEvent(t,e){for(const _ of this._eventHandlers[t])("enter"!==t||e instanceof _.type)&&("exit"!==t||e instanceof _.type)&&_.callback(e)}connectTo(t,e){if(void 0===e&&(e=1),!this._t.parent||this._t.parent!==t._t.parent)throw Error("Cannot connect two spaces that are not in the same parent space");this._t.parent._t.graph||(this._t.parent._t.graph=new r.UndirectedGraph);const _=this._t.parent._t.graph;return _.hasNode(this._t.id)||_.addNode(this._t.id,{space:this}),_.hasNode(t._t.id)||_.addNode(t._t.id,{space:t}),_.addEdge(this._t.id,t._t.id,{distance:e}),this}distanceTo(t){if(this._t.parent?._t.graph)try{const e=this._t.parent._t.graph,_=n.dijkstra.bidirectional(e,this._t.id,t._t.id,"distance");let i=0;for(let t=1;t!=_.length;t++)i+=e.getEdgeAttributes(e.edge(_[t-1],_[t])).distance;return i}catch(e){return}}closest(t){for(var e=arguments.length,_=new Array(e>1?e-1:0),i=1;i<e;i++)_[i-1]=arguments[i];let s=o;if("function"==typeof t&&"isGameElement"in t?s=t:t&&(_=[t,..._]),!this._t.parent?._t.graph)return;return this.others(s,..._).sortBy((t=>{const e=this.distanceTo(t);return void 0===e?1/0:e}))[0]}withinDistance(t){const e=new s.Z;try{const _=this._t.parent._t.graph;(0,a.ah)(_,this._t.id,(i=>{const s=_.getNodeAttributes(i).space,r=this.distanceTo(s);return void 0!==r&&(r>t||void(s!==this&&e.push(s)))}))}catch(_){throw Error("No connections on this space")}return e}_otherFinder(t){let e=t=>t!==this;for(const _ of t)if("object"==typeof _){if(void 0!==_.adjacent){const t=_.adjacent;e=e=>this.adjacentTo(e)===t&&e!==this,delete _.adjacent}if(void 0!==_.withinDistance){const t=_.withinDistance;e=e=>{const _=this.distanceTo(e);return void 0!==_&&(_<=t&&e!==this)},delete _.withinDistance}}return e}}},5048:(t,e,_)=>{_.d(e,{_Z:()=>a});var i=_(1438),s=_(1745);class r extends i.Z{putInto(t,e){if(t.isDescendantOf(this))throw Error(`Cannot put ${this} into itself`);let _="stacking"===t._t.order?0:t._t.children.length;void 0!==e?.position&&(_=e.position>=0?e.position:t._t.children.length+e.position+1),void 0!==e?.fromTop&&(_=e.fromTop),void 0!==e?.fromBottom&&(_=t._t.children.length-e.fromBottom);const i=this._t.parent,r=this._t.parent._t.children.indexOf(this);this.hasChangedParent()&&this.game.addDelay(),this._t.parent._t.children.splice(r,1),this._t.parent=t,t._t.children.splice(_,0,this),i!==t&&(delete this.row,delete this.column,e?.placement&&(this.column=e.placement.column,this.row=e.placement.row),t instanceof s.Z&&t.triggerEvent("enter",this),i instanceof s.Z&&i.triggerEvent("exit",this))}remove(){return this.putInto(this._ctx.removed)}}class n extends r{constructor(){super(...arguments),this.sides=6,this.current=1,this.flip=!1}roll(){this.current=Math.ceil((this._ctx.game?.random||Math.random)()*this.sides),this.flip=!this.flip}}const a=()=>({GameElement:i.Z,Space:s.Z,Piece:r,Die:n})}}]);